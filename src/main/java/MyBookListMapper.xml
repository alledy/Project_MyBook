<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="resource.MyBookListMapper">
	<!-- readBook -->
 	<select id="selectAllBookList" parameterType="string"  resultType="model.MyBookList">
    	select id, image, m_title, registdate, m_star, m_content from mybooklist where email = #{email} order by id asc
 	</select>
 	
 	<select id="searchBookList"  parameterType="string" resultType="model.MyBookList">
    	select id, email, title, author, publisher, image, m_title, m_star, m_content, registdate from mybooklist where email = #{email} and (title like '%'||#{readkeyword}||'%' or author like '%'||#{readkeyword}||'%' or publisher like '%'||#{readkeyword}||'%')
    </select>

  	<insert id="insertBookList"  parameterType="model.MyBookList">
  		<selectKey resultType="int" keyProperty="id" order="BEFORE">
      		select mybooklist_seq.nextval from dual     
    	</selectKey>  
    		insert into mybooklist(id, email, title, author, publisher, image, m_title, m_star, m_content,  registdate) values(#{id},#{email},#{title},#{author},#{publisher},#{image},#{m_title}, #{m_star}, #{m_content}, sysdate)
	</insert>	
	
	<delete id="deleteBookList" parameterType="int">
		delete from mybooklist where  id = #{id} 
	</delete>
	
	<update id="updateBookList" parameterType="model.MyBookList">
		update mybooklist set 
				m_title=#{m_title}, 
				m_star=#{m_star}, 
				m_content=#{m_content}, 
				registdate=sysdate
		where id=#{id}
	</update>
	
	<!-- interestBook -->
	<select id="selectAllInterestBookList" parameterType="string"  resultType="model.InterestBookList">
    	select id, image, title from interestbooklist where email = #{email} order by id asc
 	</select>

  	<insert id="insertInterestBookList"  parameterType="model.InterestBookList">
  		<selectKey resultType="int" keyProperty="id" order="BEFORE">
      		select mybooklist_seq.nextval from dual     
    	</selectKey>  
    		insert into interestbooklist(id, email, title, author, publisher, description, image) values(#{id},#{email},#{title},#{author},#{publisher}, #{description}, #{image})
	</insert>	
	
	<delete id="deleteInterestBookList" parameterType="int">
		delete from interestbooklist where id = #{id} 
	</delete> 

	<!-- detailInterestBook -->
	<select id="selectDetailInterestBook" parameterType="int"  resultType="model.InterestBookList">
    	select id, image, title, author, publisher, description from interestbooklist where id = #{id}
 	</select>
</mapper>